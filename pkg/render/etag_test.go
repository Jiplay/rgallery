package render

import (
	"testing"
)

func TestGenerateEtag(t *testing.T) {
	body := `{[{2023-03-28  [{kamnik-savinja Kamnik-Savinja} {slovenia Slovenia}] [{images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg [{kamnik-savinja Kamnik-Savinja} {slovenia Slovenia}] 3612050721 3724 5596 1.5026853 150.26852 2023-03-28 17:51:11.05 +0000 UTC 2023-03-28 00:00:00 +0000 UTC 2023-04-22 20:36:03.569 +0000 UTC 20230328-letenice padding-bottom: 150.268524%;background-image: url(data:image/jpeg;base64,/9j/2wCEAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDIBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIAAYABAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AM+OO3u9xtbC18uJjEfNUAkr1wADxT/sH/TjYf8AfP8A9am6L/qbv/r7l/nWnV8z7kcsex//2Q==) /9j/2wCEAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDIBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIAAYABAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AM+OO3u9xtbC18uJjEfNUAkr1wADxT/sH/TjYf8AfP8A9am6L/qbv/r7l/nWnV8z7kcsex//2Q== /cache/200/images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg 200w, /cache/400/images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg 400w, /cache/800/images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg 800w, /cache/1200/images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg 1200w, /cache/2400/images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg 2400w, /images/2023/20230328-letenice/20230328-letenice-robbymilo-0040.jpg 3724w}]}] [] 39 10 1 date desc}`
	ans := GenerateEtag(body)
	if ans != "80647fc1e9a1f0427360fb59d01a9844" {
		t.Errorf("Etag(%s) = %s; want 80647fc1e9a1f0427360fb59d01a9844", body, ans)
	}
}
